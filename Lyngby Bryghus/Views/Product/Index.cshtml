@using Repos.Models
@using Lyngby_Bryghus.ViewModels
@model ProductsView
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}

<section class="container paddingT20" id="product-all">
    <header class="row">
        <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
            <h2>ALLE PRODUKTER</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce quis lectus quis sem lacinia nonummy.
                Proin mollis lorem non dolor. In hac habitasse platea dictumst. Nulla ultrices odio. Donec augue.
                Phasellus dui. Maecenas facilisis nisl vitae nibh. Proin vel seo est vitae eros pretium dignissim.
                Aliquam aliquam sodales orci. Suspendisse potenti. Integer ac leo. Nunc urna ligula, gravida a, pretium vitae, bibendum nec, ante. Aliquam ullamcorper iaculis lectus. Sed vel dui.
            </p>
        </div>


        <div class="dropdown">
            <button class="btn btn-custom dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                Kategori
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                <li><a href="#0">Alle</a></li>
                @foreach (Category cat in Model.Categories)
                {
                    <li><a href="#@cat.ID" onclick="ShowProducts(@("\""+cat.Name+"\""));">@cat.Name</a></li>
                }

            </ul>
        </div>

    </header>





    <div class="row paddingT20">

        @foreach (RProducts product in Model.Products)
            {
                string[] url = Request.Url.ToString().Split('#');
                int tag = 0;

                if (url.Length > 1)
                {
                int.TryParse(url[2], out tag);
                }

                bool display = true;
            <a href="/Product/Details/@product.ID" data-tags="@foreach (Category Cat in product.categorys) { WriteLiteral(Cat.Name + ','); display = tag.Equals(Cat.ID); }" class="gallery_product col-lg-4 col-md-4 col-sm-4 col-xs-6"  style="@((display || tag.Equals(0))?"" : "display:none;")">
                <figure>
                    <img src="~/Images/ProductAllImages/Small/Canadian.png" class="img-responsive" />
                    
                    <figcaption>@product.Name</figcaption>
                </figure>
            </a>
        }
        
        

    </div>
</section>
